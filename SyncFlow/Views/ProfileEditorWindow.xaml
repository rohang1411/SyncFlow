<ui:FluentWindow 
    x:Class="SyncFlow.Views.ProfileEditorWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Edit Profile"
    Height="600"
    Width="700"
    MinHeight="500"
    MinWidth="600"
    WindowStartupLocation="CenterOwner"
    Background="{StaticResource WindowBackgroundBrush}"
    WindowBackdropType="Mica"
    WindowCornerPreference="Round"
    ExtendsContentIntoTitleBar="True">
    
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0"
                  Text="Profile Configuration"
                  FontSize="28"
                  FontWeight="SemiBold"
                  Foreground="{StaticResource PrimaryTextBrush}"
                  Margin="0,0,0,24"/>

        <!-- Profile Name -->
        <StackPanel Grid.Row="1" Margin="0,0,0,20">
            <TextBlock Text="Profile Name"
                      FontSize="14"
                      FontWeight="SemiBold"
                      Foreground="{StaticResource PrimaryTextBrush}"
                      Margin="0,0,0,8"/>
            <TextBox x:Name="NameTextBox"
                    Style="{StaticResource ModernTextBoxStyle}"
                    FontSize="14"/>
        </StackPanel>

        <!-- Folder Mappings -->
        <Grid Grid.Row="2" Margin="0,0,0,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0"
                      Text="Folder Mappings (Source → Destination)"
                      FontSize="14"
                      FontWeight="SemiBold"
                      Foreground="{StaticResource PrimaryTextBrush}"
                      Margin="0,0,0,12"/>

            <!-- Mappings List -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="MappingsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="{StaticResource CardBackgroundBrush}"
                                   BorderBrush="{StaticResource BorderBrush}"
                                   BorderThickness="1"
                                   CornerRadius="8"
                                   Padding="16"
                                   Margin="0,0,0,12">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Source Path -->
                                    <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,0,8">
                                        <TextBlock Text="Source"
                                                  FontSize="11"
                                                  Foreground="{StaticResource SecondaryTextBrush}"
                                                  Margin="0,0,0,4"/>
                                        <TextBlock Text="{Binding SourcePath}"
                                                  FontSize="13"
                                                  Foreground="{StaticResource PrimaryTextBrush}"
                                                  TextTrimming="CharacterEllipsis"/>
                                    </StackPanel>

                                    <!-- Destination Path -->
                                    <StackPanel Grid.Row="1" Grid.Column="0">
                                        <TextBlock Text="Destination"
                                                  FontSize="11"
                                                  Foreground="{StaticResource SecondaryTextBrush}"
                                                  Margin="0,0,0,4"/>
                                        <TextBlock Text="{Binding DestinationPath}"
                                                  FontSize="13"
                                                  Foreground="{StaticResource PrimaryTextBrush}"
                                                  TextTrimming="CharacterEllipsis"/>
                                    </StackPanel>

                                    <!-- Remove Button -->
                                    <Button Grid.Row="0" Grid.RowSpan="2" Grid.Column="1"
                                           Content="🗑️"
                                           Style="{StaticResource DangerButtonStyle}"
                                           Padding="12,8"
                                           FontSize="16"
                                           VerticalAlignment="Center"
                                           Click="OnRemoveMapping"
                                           Tag="{Binding}"
                                           ToolTip="Remove this mapping"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>

            <!-- Add Mapping Button -->
            <Button Grid.Row="2"
                   Content="➕ Add Folder Mapping"
                   Style="{StaticResource PrimaryButtonStyle}"
                   HorizontalAlignment="Left"
                   Padding="16,10"
                   FontSize="14"
                   Margin="0,8,0,0"
                   Click="OnAddMapping"/>
        </Grid>

        <!-- Options -->
        <StackPanel Grid.Row="3" Margin="0,0,0,20">
            <CheckBox x:Name="OverwriteCheckBox"
                     Content="Overwrite existing files"
                     Foreground="{StaticResource PrimaryTextBrush}"
                     FontSize="14"/>
        </StackPanel>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="4"
                   Orientation="Horizontal"
                   HorizontalAlignment="Right">
            <Button Content="💾 Save"
                   Style="{StaticResource PrimaryButtonStyle}"
                   Padding="20,10"
                   FontSize="14"
                   Margin="0,0,12,0"
                   Click="OnSave"/>
            <Button Content="Cancel"
                   Style="{StaticResource SecondaryButtonStyle}"
                   Padding="20,10"
                   FontSize="14"
                   Click="OnCancel"/>
        </StackPanel>
    </Grid>
</ui:FluentWindow>