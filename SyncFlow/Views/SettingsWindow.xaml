<ui:FluentWindow 
    x:Class="SyncFlow.Views.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Settings"
    Height="750"
    Width="650"
    MinHeight="600"
    MaxHeight="900"
    WindowStartupLocation="CenterOwner"
    Background="{DynamicResource WindowBackgroundBrush}"
    WindowBackdropType="Mica"
    WindowCornerPreference="Round"
    ExtendsContentIntoTitleBar="True"
    ResizeMode="CanResize">
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,24">
            <TextBlock 
                Text="âš™ï¸ Settings"
                FontSize="32"
                FontWeight="SemiBold"
                Foreground="{DynamicResource PrimaryTextBrush}"/>
            <TextBlock 
                Text="Customize your SyncFlow experience"
                FontSize="14"
                Foreground="{DynamicResource SecondaryTextBrush}"
                Margin="0,6,0,0"/>
        </StackPanel>

        <!-- Settings Content with ScrollViewer -->
        <ScrollViewer Grid.Row="1" 
                     VerticalScrollBarVisibility="Auto"
                     Margin="0,0,0,20">
            <StackPanel>
                <!-- Appearance Section -->
                <TextBlock Text="ðŸŽ¨ Appearance" 
                          FontSize="20" 
                          FontWeight="SemiBold" 
                          Foreground="{DynamicResource PrimaryTextBrush}"
                          Margin="0,0,0,16"/>

                <!-- Theme Setting -->
                <Border
                    Background="{DynamicResource CardBackgroundBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="20"
                    Margin="0,0,0,12"
                    Cursor="Hand"
                    MouseLeftButtonDown="OnSettingCardClick">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock 
                                Text="ðŸŒ“ Dark Mode"
                                FontSize="16"
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource PrimaryTextBrush}"/>
                            <TextBlock 
                                Text="Switch between light and dark theme"
                                FontSize="13"
                                Foreground="{DynamicResource SecondaryTextBrush}"
                                Margin="0,4,0,0"/>
                        </StackPanel>
                        <ToggleButton 
                            x:Name="DarkModeToggle"
                            Grid.Column="1"
                            IsChecked="{Binding IsDarkMode}"
                            Width="60"
                            Height="32"
                            VerticalAlignment="Center"
                            Style="{StaticResource AnimatedToggleButtonStyle}"/>
                    </Grid>
                </Border>

                <!-- Transparency Setting -->
                <Border
                    Background="{DynamicResource CardBackgroundBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="20"
                    Margin="0,0,0,12"
                    Cursor="Hand"
                    MouseLeftButtonDown="OnSettingCardClick">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Row="0" Grid.Column="0">
                            <TextBlock 
                                Text="âœ¨ Window Transparency"
                                FontSize="16"
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource PrimaryTextBrush}"/>
                            <TextBlock 
                                Text="Enable acrylic background effect"
                                FontSize="13"
                                Foreground="{DynamicResource SecondaryTextBrush}"
                                Margin="0,4,0,0"/>
                        </StackPanel>
                        <ToggleButton 
                            x:Name="TransparencyToggle"
                            Grid.Row="0" Grid.Column="1"
                            IsChecked="{Binding IsTransparencyEnabled}"
                            Width="60"
                            Height="32"
                            VerticalAlignment="Center"
                            Style="{StaticResource AnimatedToggleButtonStyle}"/>
                        
                        <!-- Transparency Amount Slider -->
                        <StackPanel Grid.Row="1" Grid.ColumnSpan="2" 
                                   Margin="0,16,0,0"
                                   Visibility="{Binding IsTransparencySliderEnabled, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <TextBlock Text="Transparency Amount" 
                                      FontSize="13" 
                                      FontWeight="Medium"
                                      Foreground="{DynamicResource PrimaryTextBrush}"
                                      Margin="0,0,0,8"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider Grid.Column="0"
                                       Value="{Binding TransparencyAmount}"
                                       Minimum="10"
                                       Maximum="100"
                                       TickFrequency="10"
                                       IsSnapToTickEnabled="True"
                                       VerticalAlignment="Center"
                                       Margin="0,0,16,0"/>
                                <TextBlock Grid.Column="1"
                                          Text="{Binding TransparencyAmount, StringFormat={}{0:F0}%}"
                                          FontSize="14"
                                          FontWeight="SemiBold"
                                          Foreground="{DynamicResource PrimaryTextBrush}"
                                          VerticalAlignment="Center"
                                          MinWidth="45"
                                          TextAlignment="Right"/>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Glass Effect Setting -->
                <Border
                    Background="{DynamicResource CardBackgroundBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="20"
                    Margin="0,0,0,28"
                    Cursor="Hand"
                    MouseLeftButtonDown="OnSettingCardClick">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock 
                                Text="ðŸ’Ž Glass Effect"
                                FontSize="16"
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource PrimaryTextBrush}"/>
                            <TextBlock 
                                Text="Enable modern glass/liquid glass visual effect"
                                FontSize="13"
                                Foreground="{DynamicResource SecondaryTextBrush}"
                                Margin="0,4,0,0"/>
                        </StackPanel>
                        <ToggleButton 
                            x:Name="GlassEffectToggle"
                            Grid.Column="1"
                            IsChecked="{Binding EnableGlassEffect}"
                            Width="60"
                            Height="32"
                            VerticalAlignment="Center"
                            Style="{StaticResource AnimatedToggleButtonStyle}"/>
                    </Grid>
                </Border>

                <!-- Profile Management Section -->
                <TextBlock Text="ðŸ“ Profile Management" 
                          FontSize="20" 
                          FontWeight="SemiBold" 
                          Foreground="{DynamicResource PrimaryTextBrush}"
                          Margin="0,0,0,16"/>

                <!-- Storage Path Setting -->
                <Border
                    Background="{DynamicResource CardBackgroundBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="20"
                    Margin="0,0,0,12">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Margin="0,0,0,12">
                            <TextBlock 
                                Text="ðŸ“‚ Storage Location"
                                FontSize="16"
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource PrimaryTextBrush}"/>
                            <TextBlock 
                                Text="Choose where profile data is stored"
                                FontSize="13"
                                Foreground="{DynamicResource SecondaryTextBrush}"
                                Margin="0,4,0,0"/>
                        </StackPanel>
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0"
                                    Text="{Binding ProfileStoragePath}"
                                    IsReadOnly="True"
                                    Style="{StaticResource ModernTextBoxStyle}"
                                    VerticalAlignment="Center"
                                    Margin="0,0,12,0"/>
                            <Button Grid.Column="1"
                                   Content="Browse..."
                                   Command="{Binding BrowseStoragePathCommand}"
                                   Style="{StaticResource SecondaryButtonStyle}"
                                   Padding="20,10"
                                   VerticalAlignment="Center"/>
                        </Grid>
                    </Grid>
                </Border>

                <!-- Import/Export Section -->
                <Border
                    Background="{DynamicResource CardBackgroundBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="20"
                    Margin="0,0,0,28">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Margin="0,0,0,12">
                            <TextBlock 
                                Text="ðŸ“¤ Import &amp; Export"
                                FontSize="16"
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource PrimaryTextBrush}"/>
                            <TextBlock 
                                Text="Backup and restore your profile configurations"
                                FontSize="13"
                                Foreground="{DynamicResource SecondaryTextBrush}"
                                Margin="0,4,0,0"/>
                        </StackPanel>
                        <StackPanel Grid.Row="1" Orientation="Horizontal">
                            <Button Content="ðŸ“¤ Export Profiles"
                                   Command="{Binding ExportProfilesCommand}"
                                   Style="{StaticResource PrimaryButtonStyle}"
                                   Padding="20,10"
                                   Margin="0,0,12,0"/>
                            <Button Content="ðŸ“¥ Import Profiles"
                                   Command="{Binding ImportProfilesCommand}"
                                   Style="{StaticResource SecondaryButtonStyle}"
                                   Padding="20,10"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- About Section -->
                <TextBlock Text="â„¹ï¸ About" 
                          FontSize="20" 
                          FontWeight="SemiBold" 
                          Foreground="{DynamicResource PrimaryTextBrush}"
                          Margin="0,0,0,16"/>
                <Border
                    Background="{DynamicResource CardBackgroundBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="24">
                    <StackPanel>
                        <TextBlock Text="SyncFlow" 
                                  FontSize="24" 
                                  FontWeight="Bold" 
                                  Foreground="{DynamicResource PrimaryTextBrush}"
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="Version 1.1.0" 
                                  FontSize="14" 
                                  Foreground="{DynamicResource SecondaryTextBrush}"
                                  Margin="0,0,0,12"/>
                        <TextBlock Text="A modern, professional file transfer utility with advanced folder mapping capabilities and real-time progress tracking." 
                                  FontSize="13" 
                                  Foreground="{DynamicResource SecondaryTextBrush}"
                                  TextWrapping="Wrap"
                                  LineHeight="20"
                                  Margin="0,0,0,16"/>
                        <TextBlock Text="Key Features:" 
                                  FontSize="14" 
                                  FontWeight="SemiBold"
                                  Foreground="{DynamicResource PrimaryTextBrush}"
                                  Margin="0,0,0,8"/>
                        <StackPanel Margin="12,0,0,0">
                            <TextBlock Text="â€¢ Source â†’ Destination folder mapping" 
                                      FontSize="12" 
                                      Foreground="{DynamicResource SecondaryTextBrush}"
                                      Margin="0,0,0,4"/>
                            <TextBlock Text="â€¢ Real-time transfer progress with speed monitoring" 
                                      FontSize="12" 
                                      Foreground="{DynamicResource SecondaryTextBrush}"
                                      Margin="0,0,0,4"/>
                            <TextBlock Text="â€¢ File verification and detailed reporting" 
                                      FontSize="12" 
                                      Foreground="{DynamicResource SecondaryTextBrush}"
                                      Margin="0,0,0,4"/>
                            <TextBlock Text="â€¢ Profile import/export for easy backup" 
                                      FontSize="12" 
                                      Foreground="{DynamicResource SecondaryTextBrush}"
                                      Margin="0,0,0,4"/>
                            <TextBlock Text="â€¢ Modern Fluent Design UI with animations" 
                                      FontSize="12" 
                                      Foreground="{DynamicResource SecondaryTextBrush}"
                                      Margin="0,0,0,4"/>
                            <TextBlock Text="â€¢ Storage validation and space checking" 
                                      FontSize="12" 
                                      Foreground="{DynamicResource SecondaryTextBrush}"
                                      Margin="0,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button
                Content="ðŸ’¾ Save"
                Command="{Binding SaveCommand}"
                Style="{StaticResource PrimaryButtonStyle}"
                Padding="24,12"
                FontSize="14"
                FontWeight="SemiBold"
                Margin="0,0,12,0"/>
            <Button
                Content="Cancel"
                Command="{Binding CancelCommand}"
                Style="{StaticResource SecondaryButtonStyle}"
                Padding="24,12"
                FontSize="14"/>
        </StackPanel>
    </Grid>
</ui:FluentWindow>
