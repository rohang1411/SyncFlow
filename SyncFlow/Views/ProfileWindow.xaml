<ui:FluentWindow 
    x:Class="SyncFlow.Views.ProfileWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Transfer Profiles" 
    Height="450" 
    Width="600"
    Background="#1E1E1E">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
            <ui:Button Appearance="Primary" Icon="Add24" Content="New Profile" Click="OnNewProfile" Margin="0,0,8,0"/>
            <ui:Button Icon="ArrowImport24" Content="Import Profiles" Click="OnImportProfiles" Margin="0,0,8,0"/>
            <ui:Button Icon="ArrowExport24" Content="Export Selected" Click="OnExportProfiles" 
                    IsEnabled="{Binding ElementName=ProfileList, Path=SelectedItems.Count}"/>
        </StackPanel>

        <ListBox x:Name="ProfileList" Grid.Row="1" 
                Background="#2D2D30"
                Foreground="White"
                BorderThickness="1"
                BorderBrush="#3F3F46"
                SelectionMode="Extended">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{Binding Name}" 
                                 VerticalAlignment="Center"
                                 Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                        <ui:Button Grid.Column="1" 
                                 Appearance="Secondary"
                                 Icon="Edit24"
                                 Content="Edit" 
                                 Click="OnEditProfile" 
                                 Tag="{Binding}" 
                                 Margin="8,0"/>
                        <ui:Button Grid.Column="2" 
                                 Appearance="Danger"
                                 Icon="Delete24"
                                 Content="Delete" 
                                 Click="OnDeleteProfile" 
                                 Tag="{Binding}"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
            <ui:Button 
                Appearance="Primary"
                Content="Done" 
                Click="OnDone"/>
        </StackPanel>
    </Grid>
</ui:FluentWindow>